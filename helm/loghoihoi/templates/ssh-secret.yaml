{{- if .Values.sshKeys.create }}
# SSH鍵のSecret
# 既存のSSH鍵を使用する場合は、このテンプレートを使用せず、
# 手動でSecretを作成してください:
#   kubectl create secret generic loghoi-secrets \
#     --namespace={{ .Values.namespace }} \
#     --from-file=SSH_PRIVATE_KEY=/path/to/private/key \
#     --from-file=SSH_PUBLIC_KEY=/path/to/public/key.pub
#
# または、既存のSecretを参照する場合は、sshKeys.existingSecret を設定してください

{{- if .Values.sshKeys.privateKey }}
apiVersion: v1
kind: Secret
metadata:
  name: loghoi-secrets
  namespace: {{ .Values.namespace }}
  labels:
    app: loghoi
    component: secrets
type: Opaque
data:
  SSH_PRIVATE_KEY: {{ .Values.sshKeys.privateKey | b64enc }}
  SSH_PUBLIC_KEY: {{ .Values.sshKeys.publicKey | b64enc }}
{{- else }}
# SSH鍵が提供されていないため、Secretは作成されません
# 手動でSecretを作成するか、sshKeys.privateKey と sshKeys.publicKey を設定してください
{{- end }}
{{- else if .Values.sshKeys.existingSecret }}
# 既存のSecretを使用します: {{ .Values.sshKeys.existingSecret }}
{{- else }}
# SSH鍵のSecretは作成されません
# 手動でSecretを作成してください:
#   kubectl create secret generic loghoi-secrets \
#     --namespace={{ .Values.namespace }} \
#     --from-file=SSH_PRIVATE_KEY=/path/to/private/key \
#     --from-file=SSH_PUBLIC_KEY=/path/to/public/key.pub
{{- end }}

